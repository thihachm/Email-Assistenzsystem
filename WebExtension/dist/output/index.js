(async()=>{let e=await browser.runtime.sendMessage({command:"hasEvent",reciever:"EventAgent",sender:"DisplayAgent"});if(e&&e.length>0){const n=document.createElement("div"),t=document.createElement("details");n.appendChild(t);const a=document.createElement("summary");a.innerText=e.length+" event"+(e.length>1?"s":"")+" found.",t.appendChild(a);const c=document.createElement("div");c.className="faq__content",t.appendChild(c),e.forEach((async e=>{const n=document.createElement("div");n.className="singleEventWrapper";const t=document.createElement("div");t.className="eventNotificationText",t.innerText="- "+e[0],n.appendChild(t);const a=document.createElement("input");a.className="subjectInput",a.placeholder=e.subject,n.appendChild(a);const s=await async function(e){const n=document.createElement("div");n.className="buttonGroupWrapper";const t=document.createElement("button");t.className="extensionButton",t.innerText="Insert into Calendar",t.addEventListener("click",(async()=>{await browser.runtime.sendMessage({command:"triggerCalendarEntry",reciever:"OutputAgent",sender:"DisplayAgent",data:{event:e}})})),n.appendChild(t);const a=document.createElement("button");return a.className="extensionButton",a.innerText="Download ICS",a.addEventListener("click",(async()=>{await browser.runtime.sendMessage({command:"triggerIcsDownload",reciever:"OutputAgent",sender:"DisplayAgent",data:{event:e}})})),n.appendChild(a),n}(e);n.appendChild(s),c.appendChild(n)})),document.body.insertBefore(n,document.body.firstChild)}})();